---
allowed-tools: Read(*), Glob(*), Grep(*), Edit(**/*.md), Write(**/*.md)
description: Финальная проверка всех качественных ворот
---

# Команда: /validate

> Запускает Валидатора для финальной проверки.

---

## Синтаксис

```bash
/validate
```

---

## Описание

Команда `/aidd-validate` выполняет:
- Проверку всех предыдущих ворот
- Верификацию всех артефактов
- Обновление RTM
- Формирование итогового отчёта

> **VERIFY BEFORE ACT**: Перед созданием файлов/директорий проверьте их
> существование (см. CLAUDE.md, раздел "Критические правила").

---

## Агент

**Валидатор** (`.claude/agents/validator.md`)

---

## Порядок чтения файлов

> **Принцип**: Сначала контекст ЦП, потом инструкции фреймворка.
> **Подробнее**: [docs/initialization.md](../../docs/initialization.md)

### Фаза 1: Контекст целевого проекта

| # | Файл | Условие | Зачем |
|---|------|---------|-------|
| 1 | `./CLAUDE.md` | Если существует | Специфика проекта |
| 2 | `./.pipeline-state.json` | Обязательно | ВСЕ ворота |
| 3 | `./ai-docs/docs/` | Обязательно | ВСЕ артефакты |
| 4 | `./services/` | Обязательно | Весь код |

### Фаза 2: Предусловия

| Ворота | Проверка |
|--------|----------|
| `QA_PASSED` | `.pipeline-state.json → gates.QA_PASSED.passed == true` |
| `coverage` | `.pipeline-state.json → gates.QA_PASSED.coverage >= 75` |

### Фаза 3: Инструкции фреймворка

| # | Файл | Зачем |
|---|------|-------|
| 5 | `.aidd/CLAUDE.md` | Правила фреймворка |
| 6 | `.aidd/workflow.md` | Процесс и ворота |
| 7 | `.aidd/.claude/commands/validate.md` | Этот файл |
| 8 | `.aidd/.claude/agents/validator.md` | Инструкции роли |

### Фаза 4: Шаблоны

| # | Файл | Условие |
|---|------|---------|
| 9 | `.aidd/templates/documents/rtm-template.md` | Для создания RTM |

---

## Предусловия

| Ворота | Требование |
|--------|------------|
| `QA_PASSED` | Тесты пройдены, покрытие ≥75% |

### Алгоритм проверки

```
1. Проверить существование .pipeline-state.json
2. Если файл отсутствует:
   ❌ Пайплайн не инициализирован
   → Сначала выполните /idea
3. Проверить gates.QA_PASSED.passed == true
4. Если ворота не пройдены:
   ❌ Ворота QA_PASSED не пройдены
   → Сначала выполните /test
5. Проверить gates.QA_PASSED.coverage >= 75
6. Если покрытие недостаточно:
   ⚠️ Coverage < 75%, добавьте тесты
7. Продолжить выполнение
```

---

## Выходные артефакты (в целевом проекте)

| Артефакт | Путь |
|----------|------|
| Отчёт валидации | `ai-docs/docs/reports/validation-report.md` |
| RTM | `ai-docs/docs/rtm.md` |

---

## Качественные ворота

### ALL_GATES_PASSED

| Ворота | Статус |
|--------|--------|
| PRD_READY | ✓ |
| RESEARCH_DONE | ✓ |
| PLAN_APPROVED | ✓ |
| IMPLEMENT_OK | ✓ |
| REVIEW_OK | ✓ |
| QA_PASSED | ✓ |

Дополнительно:
- [ ] Все артефакты существуют
- [ ] RTM актуальна

---

## Примеры использования

```bash
# После /test
/validate
```

---

## Следующий шаг

После прохождения ворот `ALL_GATES_PASSED`:

```bash
/deploy
```
