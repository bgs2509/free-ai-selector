---
feature_id: "F021"
feature_name: "compose-nginx-local-modes"
title: "–î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö compose-—Ñ–∞–π–ª–∞: nginx –∏ loc ‚Äî Research"
created: "2026-02-13"
author: "AI (Researcher)"
type: "research"
status: "RESEARCH_DONE"
version: 1
mode: "FEATURE"
related_features: [F005, F011-C, F020]
services: [free-ai-selector-business-api, free-ai-selector-data-postgres-api, free-ai-selector-telegram-bot, free-ai-selector-health-worker]
prd_ref: "_analysis/2026-02-13_F021_compose-nginx-local-modes.md"
findings_count: 18
---

# Research Report: F021 ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ compose-—Ä–µ–∂–∏–º—ã `nginx` –∏ `loc`

**Feature ID**: F021  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 2026-02-13  
**–ê–≤—Ç–æ—Ä**: AI Agent (–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å)  
**–°—Ç–∞—Ç—É—Å**: RESEARCH_DONE

---

## 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

- **PRD**: `ai-docs/docs/_analysis/2026-02-13_F021_compose-nginx-local-modes.md`
- **–£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö** compose-—Ñ–∞–π–ª–∞ (`docker-compose.nginx.yml` –∏ `docker-compose.loc.yml`) –±–µ–∑ override-–º–µ—Ö–∞–Ω–∏–∫–∏.
- **–¶–µ–ª—å**: —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—É—Å–∫ –ø–æ–Ω—è—Ç–Ω—ã–º –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –≤ –¥–≤—É—Ö —Å—Ä–µ–¥–∞—Ö:
  - VPS –∑–∞ –≤–Ω–µ—à–Ω–∏–º nginx;
  - –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ nginx.

---

## 2. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–¥–∞

### 2.1 Compose-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ–π—á–∞—Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ VPS-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è

**–§–∞–π–ª**: `docker-compose.yml`

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ `proxy-network` (`docker-compose.yml:119`, `docker-compose.yml:121`);
- `proxy-network` –æ–±—ä—è–≤–ª–µ–Ω–∞ –∫–∞–∫ `external: true` (`docker-compose.yml:204`, `docker-compose.yml:205`);
- —É API-—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ host-–ø–æ—Ä—Ç–æ–≤ (`docker-compose.yml:51`, `docker-compose.yml:109` ‚Äî –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–± —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö).

–í—ã–≤–æ–¥:
- —Ç–µ–∫—É—â–∏–π compose –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –¥–∞—ë—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ `localhost:8000/docs` –∏ `localhost:8001/docs`.

### 2.2 Makefile —Ü–µ–ª–∏–∫–æ–º –∑–∞–≤—è–∑–∞–Ω –Ω–∞ compose-—Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–§–∞–π–ª**: `Makefile`

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `docker compose ...` –±–µ–∑ `-f` (`Makefile:38`, `Makefile:42`, `Makefile:49`, `Makefile:57`, `Makefile:91`, `Makefile:125`, `Makefile:162`);
- health-check –æ–∂–∏–¥–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ URL `localhost:8000/8001` (`Makefile:138`, `Makefile:141`), —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å —Ç–µ–∫—É—â–∏–º VPS-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º compose –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤.

–í—ã–≤–æ–¥:
- –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è `docker-compose.yml` –≤–µ—Å—å `Makefile` –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å mode-aware.

### 2.3 –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç compose default file

**–§–∞–π–ª**: `scripts/deploy.sh`

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- `docker compose down` (`scripts/deploy.sh:21`);
- `docker compose --env-file .env up --build -d` (`scripts/deploy.sh:31`);
- —Å–∫—Ä–∏–ø—Ç –æ—Ç–¥–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—ë—Ç `proxy-network` (`scripts/deploy.sh:16`).

–í—ã–≤–æ–¥:
- –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ —Å–∫—Ä–∏–ø—Ç –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ `-f docker-compose.nginx.yml`.

### 2.4 ROOT_PATH/OpenAPI: –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å–µ–π—á–∞—Å –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ

**Business API** (`services/free-ai-selector-business-api/app/main.py`):
- `ROOT_PATH` —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ env (`services/free-ai-selector-business-api/app/main.py:56`);
- `openapi_url` —É–∂–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π (`services/free-ai-selector-business-api/app/main.py:128`);
- `root_path` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ FastAPI (`services/free-ai-selector-business-api/app/main.py:137`).

**Data API** (`services/free-ai-selector-data-postgres-api/app/main.py`):
- `ROOT_PATH` —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ env (`services/free-ai-selector-data-postgres-api/app/main.py:38`);
- –Ω–æ `openapi_url` –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –∫–∞–∫ `/openapi.json` (`services/free-ai-selector-data-postgres-api/app/main.py:102`);
- `root_path` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è (`services/free-ai-selector-data-postgres-api/app/main.py:103`).

–í—ã–≤–æ–¥:
- –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã docs –∑–∞ –ø—Ä–µ—Ñ–∏–∫—Å–æ–º Data API –Ω—É–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–æ–π –∂–µ —Å—Ö–µ–º–µ, —á—Ç–æ –≤ Business API.

### 2.5 Web UI –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç API_BASE –ø–æ –∂—ë—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø—Ä–µ—Ñ–∏–∫—Å—É

**–§–∞–π–ª**: `services/free-ai-selector-business-api/app/static/index.html`

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- `API_BASE` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `includes('/free-ai-selector/')` (`services/free-ai-selector-business-api/app/static/index.html:342`);
- —Å—Å—ã–ª–∫–∞ –Ω–∞ docs —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∫–∞–∫ `${API_BASE}/docs` (`services/free-ai-selector-business-api/app/static/index.html:350`).

–í—ã–≤–æ–¥:
- —Ä–µ—à–µ–Ω–∏–µ –Ω–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–ª—è –ª—é–±–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ `/static/`).

### 2.6 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ runbooks –∏–º–µ—é—Ç –∂—ë—Å—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–π compose-—Ñ–∞–π–ª

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ `docker-compose.yml` –≤ `README.md:313`, `docs/operations/development.md:161`, `docs/operations/deployment.md:65`;
- –º–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `make up`/`make down && make up` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è (`README.md:135`, `docs/operations/quick-start.md:57`, `docs/operations/api-keys.md:351`, `docs/operations/troubleshooting.md:113` –∏ –¥—Ä.).

–í—ã–≤–æ–¥:
- –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –æ–ø–∏—Å–∞—Ç—å –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –∑–∞–ø—É—Å–∫–∞ –∏ URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ.

### 2.7 –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–§–∞–π–ª**: `services/free-ai-selector-business-api/tests/unit/test_static_files.py`

–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:
- –µ—Å—Ç—å smoke –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏ root redirect (`services/free-ai-selector-business-api/tests/unit/test_static_files.py:27`, `services/free-ai-selector-business-api/tests/unit/test_static_files.py:38`);
- –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫ –ª–æ–≥–∏–∫–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è `API_BASE` –¥–ª—è –ø—Ä–µ—Ñ–∏–∫—Å–∞.

–í—ã–≤–æ–¥:
- –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –Ω–æ smoke-–ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ URL –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –≤—Ä—É—á–Ω—É—é.

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—É—Ç—å)

### 3.1 Compose: –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Ñ–∞–π–ª–∞ –±–µ–∑ override

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:
1. `docker-compose.nginx.yml` ‚Äî —Ç–µ–∫—É—â–∞—è VPS-–ª–æ–≥–∏–∫–∞ (–≤–∫–ª—é—á–∞—è `proxy-network` external).
2. `docker-compose.loc.yml` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª:
   - –±–µ–∑ `proxy-network`;
   - —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –ø–æ—Ä—Ç–æ–≤ API –Ω–∞ host (`8000`, `8001`);
   - —Å –ø—É—Å—Ç—ã–º `ROOT_PATH` –¥–ª—è Business/Data API.

–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫:
- –ø—Ä–æ—Å—Ç–∞—è –º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å: –æ–¥–∏–Ω —Ä–µ–∂–∏–º = –æ–¥–∏–Ω compose-—Ñ–∞–π–ª;
- –Ω–µ—Ç —Å–∫—Ä—ã—Ç–æ–≥–æ merge-–ø–æ–≤–µ–¥–µ–Ω–∏—è override;
- –Ω–∏–∂–µ —Ä–∏—Å–∫ ¬´–º–∞–≥–∏—á–µ—Å–∫–∏—Ö¬ª –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

### 3.2 Makefile: —è–≤–Ω—ã–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:
- `make nginx` -> `docker compose -f docker-compose.nginx.yml up -d`;
- `make loc` -> `docker compose -f docker-compose.loc.yml up -d`;
- `make up` –∫–∞–∫ –∞–ª–∏–∞—Å –Ω–∞ `make nginx` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

Mode-aware –∫–æ–º–∞–Ω–¥—ã:
- `down`, `logs`, `status`, `health`, `migrate`, `seed`, shell-–∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π compose-—Ñ–∞–π–ª (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Ä–µ–∂–∏–º–∞ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ mode targets).

### 3.3 Root path & docs

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–æ–∫:
1. **Data API**: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π `openapi_url` –ø–æ —Å—Ö–µ–º–µ Business API.
2. **Web UI**: –≤—ã—á–∏—Å–ª—è—Ç—å `API_BASE` –∏–∑ `window.location.pathname` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –º–∞—Ä–∫–µ—Ä–∞ `/static/`, –∞ –Ω–µ –ø–æ —Ö–∞—Ä–¥–∫–æ–¥—É `/free-ai-selector/`.
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å `ROOT_PATH`-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–ª—è VPS –∏ –ø—É—Å—Ç–æ–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è local.

### 3.4 –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Ñ–∞–π–ª–∞—Ö (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω—è—é—â–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ¬´–ø–æ—á–µ–º—É —Ç–∞–∫, –∞ –Ω–µ –∏–Ω–∞—á–µ¬ª.  
–≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–∞—Ö:
- `docker-compose.nginx.yml`;
- `docker-compose.loc.yml`;
- `Makefile`;
- `services/free-ai-selector-business-api/app/static/index.html`;
- `services/free-ai-selector-data-postgres-api/app/main.py`.

–¶–µ–ª—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:
- –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å design intent;
- —Å–Ω–∏–∑–∏—Ç—å —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø—Ä–∏ –±—É–¥—É—â–∏—Ö –ø—Ä–∞–≤–∫–∞—Ö.

---

## 4. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 4.1 –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ù–æ–≤—ã–µ Python/JS –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **–Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è**.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Docker Compose, Make, FastAPI.

### 4.2 –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –ì–¥–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è F021 |
|---|---|---|
| `ROOT_PATH` env | Business/Data API | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ docs/openapi –∑–∞ proxy |
| `proxy-network` | nginx compose | –ù—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ VPS-—Ä–µ–∂–∏–º–µ |
| `make` –∫–æ–º–∞–Ω–¥—ã | DevOps/–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –î–æ–ª–∂–Ω—ã –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å —Ä–µ–∂–∏–º |
| `index.html` inline JS | Web UI runtime | –ò—Å—Ç–æ—á–Ω–∏–∫ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è API/docs URL |
| `scripts/deploy.sh` | VPS deploy | –î–æ–ª–∂–µ–Ω —è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å nginx compose —Ñ–∞–π–ª |

---

## 5. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
2. –ù–µ –º–µ–Ω—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç API endpoint‚Äô–æ–≤.
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å HTTP-only –¥–æ—Å—Ç—É–ø Business API –∫ Data API.
4. –í `nginx` —Ä–µ–∂–∏–º–µ –Ω–µ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ API –ø–æ—Ä—Ç—ã –Ω–∞—Ä—É–∂—É.
5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∏–∑–º–µ–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–∞—Ö (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

---

## 6. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏

| # | –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|---|---|---|---|---|
| 1 | –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ `docker-compose.nginx.yml` –∏ `docker-compose.loc.yml` —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º | Medium | High | –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ + —è–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ ¬´—á—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –∏ –ø–æ—á–µ–º—É¬ª |
| 2 | –ü–æ–ª–æ–º–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ | Medium | High | –û–±–Ω–æ–≤–∏—Ç—å `Makefile` –∏ `scripts/deploy.sh`, –æ—Å—Ç–∞–≤–∏—Ç—å `make up` –∫–∞–∫ –∞–ª–∏–∞—Å |
| 3 | –†–µ–≥—Ä–µ—Å—Å–∏—è docs/openapi –≤ Data API –ø—Ä–∏ `ROOT_PATH` | Medium | Medium | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—É –∂–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Å—Ö–µ–º—É, —á—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Business API |
| 4 | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ URL –≤ UI –¥–ª—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ | Medium | Medium | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø—É—Ç–∏ –ø–æ —Ç–µ–∫—É—â–µ–º—É location, –Ω–µ –ø–æ —Ö–∞—Ä–¥–∫–æ–¥—É |
| 5 | –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–æ–≤ | High | Medium | –û–±–Ω–æ–≤–∏—Ç—å –º–∏–Ω–∏–º—É–º `README.md` –∏ `docs/operations/quick-start.md`, –∑–∞—Ç–µ–º ops docs |

---

## 7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è `/aidd-plan-feature`

1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ 3 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –±–ª–æ–∫–∞—Ö:
   - compose + make;
   - root_path/docs;
   - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
2. –Ø–≤–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ ¬´–ø–æ—á–µ–º—É —Ç–∞–∫¬ª.
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å smoke-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:
   - `nginx`: –ø–æ—Ä—Ç—ã –Ω–µ —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–ø—Ä—è–º—É—é, —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ proxy-–ø—É—Ç—å;
   - `loc`: `localhost:8000/docs` –∏ `localhost:8001/docs` –¥–æ—Å—Ç—É–ø–Ω—ã.
4. –í–∫–ª—é—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `scripts/deploy.sh` –≤ scope, —á—Ç–æ–±—ã –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–∫—Ä—ã—Ç—É—é —Ä–µ–≥—Ä–µ—Å—Å–∏—é –¥–µ–ø–ª–æ—è.

---

## 8. Quality Cascade Checklist (7/7)

### QC-1: DRY ‚úÖ
- [x] –ù–∞–π–¥–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ—á–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`docker-compose.yml`, `Makefile`, `deploy.sh`).
- [x] –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é nginx-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–∞–∫ –æ—Å–Ω–æ–≤—É `docker-compose.nginx.yml`.
- [x] –ò–∑–±–µ–≥–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ root_path –≤ –∫–æ–¥–µ —á–µ—Ä–µ–∑ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é Business/Data –ø–æ–¥—Ö–æ–¥–∞.

### QC-2: KISS ‚úÖ
- [x] –í—ã–±—Ä–∞–Ω –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –≤–∞—Ä–∏–∞–Ω—Ç: 2 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö compose-—Ñ–∞–π–ª–∞.
- [x] –û—Ç–∫–∞–∑ –æ—Ç override-—Å–ª–æ—è –∏ —Å–∫—Ä—ã—Ç–æ–≥–æ merge-–ø–æ–≤–µ–¥–µ–Ω–∏—è.
- [x] –Ø–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `make nginx`/`make loc`.

### QC-3: YAGNI ‚úÖ
- [x] –ù–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã.
- [x] –ù–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- [x] –ù–µ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è runtime-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏/–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ compose.

### QC-4: SoC ‚úÖ
- [x] –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –º–µ–Ω—è–µ—Ç—Å—è –≤ compose/make, –∞ –Ω–µ –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤.
- [x] Root path –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ API/UI —Å–ª–æ—è—Ö, –≥–¥–µ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ.
- [x] –î–µ–ø–ª–æ–π-—Å–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é.

### QC-5: SSoT ‚úÖ
- [x] –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –æ–¥–∏–Ω compose-–∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã.
- [x] `ROOT_PATH` –æ—Å—Ç–∞—ë—Ç—Å—è env-driven SSOT.
- [x] Swagger/OpenAPI URL —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ FastAPI, –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–∞–∫ ¬´–∂—ë—Å—Ç–∫–∏—Ö¬ª —Ö–∞–∫–æ–≤.

### QC-6: CoC ‚úÖ
- [x] –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–µ–∫—É—â–∏–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (Make + Docker Compose + FastAPI).
- [x] –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è backward compatibility —á–µ—Ä–µ–∑ `make up`.
- [x] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Ñ–∞–π–ª–∞—Ö –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

### QC-7: Security ‚úÖ
- [x] –í nginx-—Ä–µ–∂–∏–º–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ API –ø–æ—Ä—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ—ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏.
- [x] –ù–µ—Ç —Ä–∞–±–æ—Ç—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –≤ —Ä–∞–º–∫–∞—Ö —Ñ–∏—á–∏.
- [x] –ò—Å–∫–ª—é—á–µ–Ω–æ —á—Ç–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (`.env`) –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.

---

## 9. –ß–µ–∫–ª–∏—Å—Ç –≤–æ—Ä–æ—Ç RESEARCH_DONE

- [x] üî¥ Research –æ—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ: `ai-docs/docs/_research/2026-02-13_F021_compose-nginx-local-modes.md`
- [x] üî¥ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- [x] üî¥ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- [x] üî¥ `.pipeline-state.json` –æ–±–Ω–æ–≤–ª—ë–Ω (gate: RESEARCH_DONE, artifact path —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç naming_version)
- [x] üü° –†–∏—Å–∫–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
- [x] üü° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω—ã

---

## 10. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

```bash
/aidd-plan-feature
```
