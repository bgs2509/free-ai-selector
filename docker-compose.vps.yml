# =============================================================================
# Free AI Selector - Docker Compose VPS Override
# =============================================================================
# Используется для VPS/production окружения за внешним nginx reverse proxy.
#
# Запуск:
#   docker compose -f docker-compose.yml -f docker-compose.vps.yml up -d
#   или: make vps
#
# Что добавляет к базовому docker-compose.yml:
# - Подключение Business API к внешней proxy-network для nginx
# - Определение proxy-network как external
#
# Порты API НЕ публикуются: доступ только через nginx reverse proxy.
# ROOT_PATH берётся из .env (${ROOT_PATH:-} / ${DATA_API_ROOT_PATH:-}).
# =============================================================================

services:
  # Подключаем Business API к external proxy-network для маршрутизации
  # через внешний nginx reverse proxy.
  # Docker Compose merge добавляет proxy-network к уже определённой
  # free-ai-selector-network из базового файла.
  free-ai-selector-business-api:
    networks:
      - proxy-network

# External сеть, создаётся и управляется внешним nginx-proxy контейнером.
# На VPS должна существовать до запуска: docker network create proxy-network
networks:
  proxy-network:
    external: true
